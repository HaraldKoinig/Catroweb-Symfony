function ProgramComments(programId,visibleComments,showStep,minAmountOfVisibleComments,totalAmountOfComments,cancel,deleteIt,reportIt,areYouSure,noWayOfReturn,deleteConfirmation,reportConfirmation,popUpCommentReportedTitle,popUpCommentReportedText,popUpDeletedTitle,popUpDeletedText,noAdminRightsMessage,defaultErrorMessage,statusCode_OK,statusCode_NOT_LOGGED_IN,statusCode_NO_ADMIN_RIGHTS){let amountOfVisibleComments;function deleteComment(commentId){$.ajax({url:"../deleteComment",type:"get",data:{ProgramId:programId,CommentId:commentId},success:function(data){data===statusCode_NOT_LOGGED_IN?redirectToLogin():data===statusCode_NO_ADMIN_RIGHTS?swal(noAdminRightsMessage):($("#comment-"+commentId).remove(),showSuccessPopUp(popUpDeletedTitle,popUpDeletedText))},error:function(){swal(defaultErrorMessage)}})}function reportComment(commentId){$.ajax({url:"../reportComment",type:"get",data:{ProgramId:programId,CommentId:commentId},success:function(data){data===statusCode_NOT_LOGGED_IN?redirectToLogin():showSuccessPopUp(popUpCommentReportedTitle,popUpCommentReportedText)},error:function(){swal(defaultErrorMessage)}})}function askForConfirmation(continueWithAction,commentId,text,okayText){swal({title:areYouSure,html:text+"<br><br>"+noWayOfReturn,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:okayText,cancelButtonText:cancel}).then(()=>{continueWithAction(commentId)})}function showSuccessPopUp(title,text){swal({title:title,text:text,type:"success",confirmButtonClass:"btn btn-success"}).then(()=>{location.reload()})}function redirectToLogin(){window.location.href="../login"}function updateCommentsVisibility(){$(".single-comment").each(function(index,comment){index<amountOfVisibleComments?$(comment).show():$(comment).hide()})}function updateButtonVisibility(){amountOfVisibleComments>minAmountOfVisibleComments?$("#show-less-comments-button").show():$("#show-less-comments-button").hide(),amountOfVisibleComments<totalAmountOfComments?$("#show-more-comments-button").show():$("#show-more-comments-button").hide()}$(function(){amountOfVisibleComments=visibleComments,function(){let lastSessionAmount=JSON.parse(window.sessionStorage.getItem("visibleComments"));null!==lastSessionAmount&&(amountOfVisibleComments=lastSessionAmount);amountOfVisibleComments>totalAmountOfComments&&(amountOfVisibleComments=totalAmountOfComments)}(),updateCommentsVisibility(),updateButtonVisibility()}),$(document).on("click","#comment-post-button",function(){!function(){let msg=$("#comment-message").val();if(0===msg.length)return;$.ajax({url:"../comment",type:"post",data:{Message:msg,ProgramId:programId},success:function(data){data===statusCode_NOT_LOGGED_IN?redirectToLogin():($("#comments-wrapper").load(" #comments-wrapper"),$("#comment-message").val(""),location.reload())},error:function(){swal(defaultErrorMessage)}})}()}),$(document).on("click",".comment-delete-button",function(){askForConfirmation(deleteComment,$(this).attr("id").substring("comment-delete-button-".length),deleteConfirmation,deleteIt)}),$(document).on("click",".comment-report-button",function(){askForConfirmation(reportComment,$(this).attr("id").substring("comment-delete-button-".length),reportConfirmation,reportIt)}),$(document).on("click",".add-comment-button",function(){let commentWrapper=$("#user-comment-wrapper"),showCommentWrapperButton=$("#show-add-comment-button"),hideCommentWrapperButton=$("#hide-add-comment-button");commentWrapper.is(":visible")?(commentWrapper.slideUp(),hideCommentWrapperButton.hide(),showCommentWrapperButton.show()):(commentWrapper.slideDown(),showCommentWrapperButton.hide(),hideCommentWrapperButton.show())}),$(document).on("click","#show-more-comments-button",function(){var step;step=showStep,amountOfVisibleComments=Math.min(amountOfVisibleComments+step,totalAmountOfComments),window.sessionStorage.setItem("visibleComments",JSON.stringify(amountOfVisibleComments)),updateCommentsVisibility(),updateButtonVisibility()}),$(document).on("click","#show-less-comments-button",function(){var step;step=showStep,amountOfVisibleComments=Math.max(amountOfVisibleComments-step,minAmountOfVisibleComments),window.sessionStorage.setItem("visibleComments",JSON.stringify(amountOfVisibleComments)),updateCommentsVisibility(),updateButtonVisibility()})}